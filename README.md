# Тестовое задание для техношколы WB

## Локальный запуск

### Запуск в docker (запускается весь сервис целиком)
```bash
docker compose up -d --build
```

### Запуск на localhost (должны быть запущены: postgres, redis, kafka)
```bash
task run
```

## Использование

- Конфигурационные файлы лежат в директории `/config/`. Настройка кеширования находится в конфиге redis: `enable: true/false`;
- ui находится по адресу `http://localhost:8080/`;

### Тестирование работы 

1. Для начала необходимо запустить сервис, например в docker:

```bash
docker compose up -d --build
```

2. Далее запускаем скрипт, который добавляет 1000 заказов в систему с id от **0** до **999**:

```bash
task run-filling-with-data
```

3. Следующим запускаем скрипт, который получит 1000 заказов:

```bash
task run-load-testing
```

4. Также можно перейти в ui `http://localhost:8080/` и там ввести id и получить данные о заказе.

### Итоги тестирования кеша

- При включённом кеше `enable: true` в [config.docker.yml](config/config.docker.yml), время обработки каждого запроса составило примерно _155 µs_;
- При выключенном кеше `enable: false` в [config.docker.yml](config/config.docker.yml), время обработки каждого запроса составило примерно _800 µs_;

p.s. Если тестировать из браузера, а не скриптами, то время обработки запроса и с включенным кешем, и с выключенным увеличивается, но и в этой ситуации получение из redis сильно выигрывает.
